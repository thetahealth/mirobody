import{c as G,j as a,W as re,X as ie,a as T,m as I,b as R,u as W,O as K,M as le,S as ce,Y as ue,Z as de,_ as Z,$ as he,t as me,k as ge}from"./index-BICubz86.js";import{r as u,e as z,x as pe,B as U}from"./vendor-antd-DoyqoZ7x.js";import{S as Ae}from"./logo-DuzqZi6-.js";const _e="_menu_1dkgs_1",fe={menu:_e},aa=e=>{const t=G.c(5),{minWidth:s,maxWidth:l,children:o,isExpanded:r}=e,A=(r===void 0?!1:r)?l===void 0?380:l:s===void 0?88:s;let m;t[0]!==A?(m={width:A,backgroundColor:"#F5F5F5"},t[0]=A,t[1]=m):m=t[1];let f;return t[2]!==o||t[3]!==m?(f=a.jsx("div",{className:fe.menu,style:m,children:o}),t[2]=o,t[3]=m,t[4]=f):f=t[4],f},Ce="_header_jmvtg_1",ve="_left_jmvtg_12",xe="_navs_jmvtg_20",Ee="_nav_jmvtg_20",be="_nav_active_jmvtg_34",Se="_logo_full_jmvtg_44",Le="_logo_short_jmvtg_53",y={header:Ce,left:ve,navs:xe,nav:Ee,nav_active:be,logo_full:Se,logo_short:Le},ye=e=>u.createElement("svg",{width:23,height:24,viewBox:"0 0 23 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("path",{d:"M22.8429 6.84462C22.8429 3.0773 19.9346 0.0197148 16.3398 0H0V10.3126H16.3398C17.9718 10.3216 19.4609 10.9579 20.6013 12.0009C21.9741 10.7464 22.8429 8.90213 22.8429 6.84462Z",fill:"black"}),u.createElement("path",{d:"M20.6013 12.0018C19.4609 13.0449 17.9718 13.6811 16.3398 13.6883H0V24.0009H16.3398C19.9346 23.9812 22.8429 20.9236 22.8429 17.1563C22.8429 15.0988 21.9741 13.2546 20.6013 12V12.0018Z",fill:"#005CF5"})),Me=e=>u.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("path",{d:"M13.6009 25L13.2463 22.1141C12.9969 22.0291 12.7411 21.9102 12.479 21.7572C12.217 21.604 11.9827 21.44 11.7761 21.2652L9.14885 22.3947L7 18.6053L9.27248 16.8581C9.25106 16.7172 9.23585 16.5758 9.22684 16.4337C9.21784 16.2916 9.21334 16.15 9.21334 16.009C9.21334 15.8743 9.21784 15.7374 9.22684 15.5983C9.23585 15.4592 9.25106 15.3071 9.27248 15.1419L7 13.3947L9.14885 9.6235L11.7671 10.744C11.9916 10.5631 12.2314 10.3976 12.4862 10.2476C12.7411 10.0976 12.9915 9.97703 13.2375 9.88592L13.6009 7H17.8991L18.2537 9.89492C18.533 9.99818 18.7858 10.1187 19.0119 10.2566C19.2382 10.3944 19.4666 10.5569 19.6971 10.744L22.3511 9.6235L24.5 13.3947L22.1917 15.1692C22.225 15.3222 22.2433 15.4652 22.2464 15.5983C22.2493 15.7313 22.2508 15.8652 22.2508 16C22.2508 16.1287 22.2478 16.2596 22.2417 16.3927C22.2358 16.5256 22.2144 16.6778 22.1775 16.8491L24.4679 18.6053L22.3188 22.3947L19.6971 21.256C19.4666 21.4431 19.2314 21.6086 18.9914 21.7524C18.7515 21.8964 18.5056 22.014 18.2537 22.1051L17.8991 25H13.6009ZM14.8188 23.5789H16.6491L16.9839 21.0412C17.4591 20.9149 17.8934 20.7354 18.2867 20.5028C18.6802 20.2701 19.0596 19.971 19.4249 19.6054L21.7386 20.5947L22.6557 18.9842L20.6356 17.4357C20.7132 17.1904 20.7659 16.9498 20.7939 16.7141C20.822 16.4785 20.836 16.2405 20.836 16C20.836 15.7534 20.822 15.5153 20.7939 15.2859C20.7659 15.0563 20.7132 14.8219 20.6356 14.5825L22.6734 13.0158L21.7565 11.4053L19.4159 12.409C19.1042 12.0702 18.7308 11.7708 18.2958 11.5109C17.8606 11.251 17.4203 11.067 16.9751 10.9588L16.6812 8.42105H14.8332L14.5249 10.9498C14.0499 11.064 13.6112 11.2388 13.2089 11.4744C12.8064 11.7102 12.4225 12.0138 12.0571 12.3853L9.74345 11.4053L8.82664 13.0158L10.8377 14.5406C10.7601 14.7654 10.7057 14.9993 10.6747 15.2421C10.6437 15.4849 10.6281 15.7406 10.6281 16.009C10.6281 16.2556 10.6437 16.4974 10.6747 16.7342C10.7057 16.9711 10.7571 17.2049 10.8288 17.4357L8.82664 18.9842L9.74345 20.5947L12.0483 19.6C12.4017 19.9692 12.7796 20.2716 13.1819 20.5073C13.5843 20.7429 14.0291 20.9239 14.5161 21.0502L14.8188 23.5789ZM15.7607 18.8421C16.5355 18.8421 17.1948 18.5655 17.7387 18.0122C18.2825 17.4589 18.5545 16.7882 18.5545 16C18.5545 15.2118 18.2825 14.5411 17.7387 13.9878C17.1948 13.4345 16.5355 13.1579 15.7607 13.1579C14.9763 13.1579 14.3146 13.4345 13.7755 13.9878C13.2365 14.5411 12.967 15.2118 12.967 16C12.967 16.7882 13.2365 17.4589 13.7755 18.0122C14.3146 18.5655 14.9763 18.8421 15.7607 18.8421Z",fill:"#1F1F1F"}),u.createElement("circle",{cx:15.6996,cy:16.0004,r:1.6,fill:"white"})),Ne="_settingModal_1c6or_1",we="_title_1c6or_13",Te="_section_1c6or_19",ke="_sectionTitle_1c6or_22",je="_languageList_1c6or_28",Be="_languageItem_1c6or_36",Pe="_active_1c6or_53",Ie="_languageName_1c6or_59",Re="_radioButton_1c6or_70",Ue="_radioButtonInner_1c6or_85",ze="_timezoneSelectDropdown_1c6or_118",De="_logoutButton_1c6or_122",He="_mcpUrlTextarea_1c6or_136",d={settingModal:Ne,title:we,section:Te,sectionTitle:ke,languageList:je,languageItem:Be,active:Pe,languageName:Ie,radioButton:Re,radioButtonInner:Ue,timezoneSelectDropdown:ze,logoutButton:De,mcpUrlTextarea:He};z.extend(re);z.extend(ie);function Oe(e){const t=Math.floor(Math.abs(e)/60),s=Math.abs(e)%60,l=e>=0?"+":"-";return"(GMT".concat(l).concat(String(t).padStart(2,"0"),":").concat(String(s).padStart(2,"0"),")")}function Ve(e,t){try{const s=new Date,r=new Intl.DateTimeFormat(t,{timeZone:e,timeZoneName:"long"}).formatToParts(s).find(c=>c.type==="timeZoneName");return r?r.value:e}catch(s){return e}}const $={Shanghai:"北京",Beijing:"北京",Hong_Kong:"香港",Macau:"澳门",Taipei:"台北",Tokyo:"东京",Seoul:"首尔",Jakarta:"雅加达",Bangkok:"曼谷",Singapore:"新加坡",Dubai:"迪拜",Mumbai:"孟买",Kolkata:"加尔各答",Dhaka:"达卡",Yangon:"仰光",Ho_Chi_Minh:"胡志明市",Manila:"马尼拉",Kuala_Lumpur:"吉隆坡",Phnom_Penh:"金边",Vientiane:"万象",Ulaanbaatar:"乌兰巴托",Almaty:"阿拉木图",Tashkent:"塔什干",Baku:"巴库",Yerevan:"埃里温",Tbilisi:"第比利斯",Baghdad:"巴格达",Riyadh:"利雅得",Tehran:"德黑兰",Jerusalem:"耶路撒冷",Amman:"安曼",Beirut:"贝鲁特",Damascus:"大马士革",Kuwait:"科威特",Muscat:"马斯喀特",Qatar:"多哈",Kabul:"喀布尔",Karachi:"卡拉奇",Islamabad:"伊斯兰堡",Kathmandu:"加德满都",Thimphu:"廷布",Colombo:"科伦坡",Maldives:"马累",New_York:"纽约",Chicago:"芝加哥",Denver:"丹佛",Los_Angeles:"洛杉矶",Toronto:"多伦多",Vancouver:"温哥华",Mexico_City:"墨西哥城",Sao_Paulo:"圣保罗",Buenos_Aires:"布宜诺斯艾利斯",Lima:"利马",Bogota:"波哥大",Santiago:"圣地亚哥",Caracas:"加拉加斯",London:"伦敦",Paris:"巴黎",Berlin:"柏林",Rome:"罗马",Madrid:"马德里",Amsterdam:"阿姆斯特丹",Brussels:"布鲁塞尔",Vienna:"维也纳",Zurich:"苏黎世",Stockholm:"斯德哥尔摩",Oslo:"奥斯陆",Copenhagen:"哥本哈根",Helsinki:"赫尔辛基",Warsaw:"华沙",Prague:"布拉格",Budapest:"布达佩斯",Athens:"雅典",Istanbul:"伊斯坦布尔",Moscow:"莫斯科",Kiev:"基辅",Sydney:"悉尼",Melbourne:"墨尔本",Brisbane:"布里斯班",Perth:"珀斯",Adelaide:"阿德莱德",Darwin:"达尔文",Auckland:"奥克兰",Honolulu:"火奴鲁鲁",Cairo:"开罗",Johannesburg:"约翰内斯堡",Lagos:"拉各斯",Nairobi:"内罗毕",Casablanca:"卡萨布兰卡"};function Ke(e,t){const s=e.split("/");if(s.length>1){const l=s[s.length-1];return t==="zh-CN"&&$[l]?$[l]:l.replace(/_/g," ")}return e}const Ze=["Pacific/Auckland","Australia/Sydney","Australia/Melbourne","Australia/Adelaide","Australia/Brisbane","Australia/Darwin","Asia/Tokyo","Asia/Seoul","Asia/Shanghai","Asia/Hong_Kong","Asia/Macau","Asia/Taipei","Asia/Singapore","Asia/Kuala_Lumpur","Asia/Manila","Asia/Ulaanbaatar","Australia/Perth","Asia/Bangkok","Asia/Jakarta","Asia/Ho_Chi_Minh","Asia/Phnom_Penh","Asia/Vientiane","Asia/Yangon","Asia/Dhaka","Asia/Thimphu","Asia/Kathmandu","Asia/Kolkata","Asia/Colombo","Asia/Karachi","Asia/Almaty","Asia/Tashkent","Asia/Kabul","Asia/Dubai","Asia/Muscat","Asia/Baku","Asia/Yerevan","Asia/Tbilisi","Asia/Tehran","Europe/Istanbul","Europe/Moscow","Asia/Riyadh","Asia/Baghdad","Asia/Amman","Asia/Damascus","Asia/Kuwait","Africa/Nairobi","Europe/Helsinki","Europe/Athens","Europe/Kiev","Asia/Jerusalem","Asia/Beirut","Africa/Cairo","Africa/Johannesburg","Europe/Paris","Europe/Berlin","Europe/Rome","Europe/Madrid","Europe/Amsterdam","Europe/Brussels","Europe/Vienna","Europe/Zurich","Europe/Stockholm","Europe/Oslo","Europe/Copenhagen","Europe/Warsaw","Europe/Prague","Europe/Budapest","Africa/Lagos","Africa/Casablanca","Indian/Maldives","Asia/Qatar","UTC","Europe/London","America/Sao_Paulo","America/Buenos_Aires","America/Santiago","America/Caracas","America/New_York","America/Toronto","America/Lima","America/Bogota","America/Chicago","America/Mexico_City","America/Denver","America/Los_Angeles","America/Vancouver","Pacific/Honolulu"],$e={"Asia/Shanghai":{en:["shanghai","beijing","chongqing","guangzhou","shenzhen","chengdu"],zh:["北京","上海","重庆","广州","深圳","成都"]},"Europe/Paris":{en:["paris","berlin","rome","madrid","amsterdam","brussels","vienna","zurich","stockholm","oslo","copenhagen","warsaw","prague","budapest"],zh:["巴黎","柏林","罗马","马德里","阿姆斯特丹","布鲁塞尔","维也纳","苏黎世","斯德哥尔摩","奥斯陆","哥本哈根","华沙","布拉格","布达佩斯"]},"America/New_York":{en:["new york","toronto","ny","nyc"],zh:["纽约","多伦多"]},"America/Chicago":{en:["chicago","mexico city","mexico"],zh:["芝加哥","墨西哥城"]},"America/Los_Angeles":{en:["los angeles","vancouver","la","san francisco","seattle"],zh:["洛杉矶","温哥华","旧金山","西雅图"]},"Australia/Sydney":{en:["sydney","melbourne"],zh:["悉尼","墨尔本"]},"Asia/Riyadh":{en:["riyadh","baghdad","kuwait"],zh:["利雅得","巴格达","科威特"]},"Asia/Dubai":{en:["dubai","muscat","abu dhabi"],zh:["迪拜","马斯喀特","阿布扎比"]},"Asia/Qatar":{en:["doha","qatar"],zh:["多哈","卡塔尔"]},"Indian/Maldives":{en:["male","maldives"],zh:["马累","马尔代夫"]},"Asia/Kolkata":{en:["kolkata","colombo","mumbai","delhi"],zh:["加尔各答","科伦坡","孟买","德里"]},"Europe/Helsinki":{en:["helsinki","athens","kiev","kyiv","cairo"],zh:["赫尔辛基","雅典","基辅","开罗"]}};function Ge(){const e={},t={};return Object.entries($e).forEach(([s,l])=>{const o=[...l.en,...l.zh],r=[s];if(t[s]=o,s==="Europe/Paris"){const c=["Europe/Paris","Europe/Berlin","Europe/Rome","Europe/Madrid","Europe/Amsterdam","Europe/Brussels","Europe/Vienna","Europe/Zurich","Europe/Stockholm","Europe/Oslo","Europe/Copenhagen","Europe/Warsaw","Europe/Prague","Europe/Budapest"];r.push(...c),c.forEach(h=>{t[h]=o})}else s==="America/New_York"?(r.push("America/Toronto"),t["America/Toronto"]=o):s==="America/Los_Angeles"?(r.push("America/Vancouver"),t["America/Vancouver"]=o):s==="Australia/Sydney"?(r.push("Australia/Melbourne"),t["Australia/Melbourne"]=o):s==="Asia/Riyadh"?(r.push("Asia/Baghdad","Asia/Kuwait"),t["Asia/Baghdad"]=o,t["Asia/Kuwait"]=o):s==="Asia/Dubai"?(r.push("Asia/Muscat"),t["Asia/Muscat"]=o):s==="Asia/Kolkata"?(r.push("Asia/Colombo"),t["Asia/Colombo"]=o):s==="Europe/Helsinki"&&(r.push("Europe/Athens","Europe/Kiev","Africa/Cairo"),t["Europe/Athens"]=o,t["Europe/Kiev"]=o,t["Africa/Cairo"]=o);o.forEach(c=>{const h=c.toLowerCase();e[h]||(e[h]=[]),e[c]||(e[c]=[]),r.forEach(p=>{e[h].includes(p)||e[h].push(p),e[c].includes(p)||e[c].push(p)})})}),{cityNameToTimezones:e,timezoneToCityGroup:t}}function We(e="en"){const t=[];return Ze.forEach(s=>{try{const l=z().tz(s).utcOffset(),o=Oe(l),r=Ve(s,e),c=Ke(s,e),h="".concat(o," ").concat(r," - ").concat(c);t.push({label:h,value:s})}catch(l){T.warn("Invalid timezone: ".concat(s),l)}}),t}const Fe=({isOpen:e,onClose:t})=>{const s=I(n=>n.api_base_url),l=I(n=>n.setApiBaseUrl),o=I(n=>n.isShowAPIConfig),[r,c]=u.useState(s),[h,p]=u.useState(""),[A,m]=u.useState(""),[f,v]=u.useState(!1),[x,L]=u.useState(""),[S,E]=u.useState(!1),g=u.useRef(null),w=u.useRef(null),b=u.useRef(null),P=()=>{w.current&&(w.current.abort(),w.current=null),b.current&&(b.current.abort(),b.current=null),g.current&&(clearTimeout(g.current),g.current=null)};u.useEffect(()=>{if(!e){P(),v(!1);return}c(s),p(""),P(),w.current=new AbortController;const n=w.current;b.current=new AbortController;const _=b.current;return m(""),v(!1),E(!0),R.getPersonMcp(n.signal).then(({url:i})=>{n.signal.aborted||m(i||"")}).catch(i=>{i.name==="CanceledError"||i.name==="AbortError"||(T.error("ERROR: Get Person MCP Url",i),n.signal.aborted||(m(""),v(!1)))}),R.getUserSettings(_.signal).then(i=>{var M;!_.signal.aborted&&((M=i==null?void 0:i.preferences)!=null&&M.timezone)&&L(i.preferences.timezone)}).catch(i=>{i.name==="CanceledError"||i.name==="AbortError"||T.error("ERROR: Get User Settings",i)}).finally(()=>{_.signal.aborted||E(!1)}),P},[e,s]);const{t:C}=W(),k=K.language,F=u.useMemo(()=>We(k),[k]),{cityNameToTimezones:j}=u.useMemo(()=>Ge(),[]),Y=n=>{K.changeLanguage(n),localStorage.setItem(de,n)},J=async n=>{if(n===x)return;b.current&&b.current.abort(),b.current=new AbortController;const _=b.current;E(!0);try{await R.updateUserSettings({timezone:n},_.signal),_.signal.aborted||L(n)}catch(i){if(i.name==="CanceledError"||i.name==="AbortError")return;T.error("ERROR: Update User Settings",i)}finally{_.signal.aborted||E(!1)}},Q=()=>{he(),window.location.href="/login"},q=n=>n.trim()!==""&&(n.startsWith("http://")||n.startsWith("https://"))&&!n.endsWith("/"),X=n=>{c(n.target.value)},ee=()=>{if(!q(r)){p(C("please_enter_right_server_url"));return}l(r),sessionStorage.setItem(Z,r)},ae=()=>{c(""),l(""),sessionStorage.setItem(Z,""),p("")},D=()=>{g.current&&(clearTimeout(g.current),g.current=null)},te=async()=>{try{if(!(A!=null&&A.trim()))return;D(),await navigator.clipboard.writeText(A),v(!0),g.current=setTimeout(()=>{v(!1),g.current=null},1500)}catch(n){T.error("ERROR: Copy MCP Url",n),v(!1),D()}};return a.jsx(le,{isOpen:e,onClose:t,children:a.jsxs("div",{className:d.settingModal,children:[a.jsx("h2",{className:d.title,children:C("settings")}),a.jsx(ce,{onClick:t,className:"cursor-pointer absolute top-[20px] right-[20px]"}),a.jsxs("div",{className:d.section,children:[a.jsx("h3",{className:d.sectionTitle,children:C("language")}),a.jsx("div",{className:d.languageList,children:ue.map(n=>a.jsxs("div",{className:"".concat(d.languageItem," ").concat(k===n.code?d.active:""),onClick:()=>Y(n.code),children:[a.jsx("div",{className:d.radioButton,children:k===n.code&&a.jsx("div",{className:d.radioButtonInner})}),a.jsx("span",{className:d.languageName,children:n.name})]},n.code))})]}),a.jsxs("div",{className:d.section,children:[a.jsx("h3",{className:d.sectionTitle,children:C("timezone")}),a.jsx(pe,{value:x,onChange:J,loading:S,placeholder:C("timezone"),style:{width:"100%"},options:F,showSearch:{filterOption:(n,_)=>{const i=n.trim().toLowerCase();if(!i)return!0;const M=(_==null?void 0:_.value)||"",se=((_==null?void 0:_.label)||"").toLowerCase();let N=j[i]||j[n.trim()];if(!N||N.length===0){const O=Object.keys(j).filter(B=>B.toLowerCase().startsWith(i));if(O.length>0){const B=new Set;O.forEach(ne=>{const V=j[ne];V&&V.forEach(oe=>B.add(oe))}),N=Array.from(B)}}if(N&&N.length>0)return N.includes(M);const H=(M.split("/").pop()||"").toLowerCase().replace(/_/g," ");return se.includes(i)||M.toLowerCase().includes(i)||H.includes(i)||i.includes(H)}},getPopupContainer:()=>document.body,classNames:{popup:{root:d.timezoneSelectDropdown}},popupStyle:{zIndex:1e4}})]}),o&&a.jsxs("div",{className:d.section,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[16px] text-[#666] font-[500]",children:C("api_config")}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(U,{type:"link",onClick:ee,style:{padding:0},children:C("save")}),a.jsx(U,{type:"link",onClick:ae,style:{padding:0},children:C("reset")})]})]}),a.jsx("div",{className:"flex gap-0 items-center",children:a.jsx("input",{style:{padding:"12px",border:"1px solid",borderColor:h?"#EC221F":"#D9D9D9"},className:"flex-1 border border-gray-300 rounded p-2 text-[14px]",type:"text",placeholder:C("api_config_placeholder"),value:r,onChange:X})}),a.jsx("div",{className:"text-red-500 text-sm",children:h&&h})]}),a.jsxs("div",{className:d.section,children:[a.jsxs("div",{className:"flex items-center justify-between text-[16px] text-[#666] font-[500] mb-2",children:[a.jsx("div",{children:"MCP Url"}),f?a.jsx("div",{className:"text-green-500 text-sm",children:C("copied")}):a.jsx(U,{type:"link",onClick:te,children:C("copy")})]}),a.jsx("textarea",{className:d.mcpUrlTextarea,value:A,readOnly:!0})]}),a.jsx("div",{className:d.section,children:a.jsx("div",{className:d.logoutButton,onClick:Q,children:C("logout")})})]})})},Ye=[{key:"drive",path:"/drive",matchPaths:["/","/drive"],i18nKey:"drive"},{key:"chat",path:"/chat",matchPaths:["/chat"],i18nKey:"chat"}];function ta(){const e=G.c(19),{t}=W(),[s,l]=u.useState(!1),o=me(),r=ge();u.useState(!1);let c;e[0]!==o?(c=g=>g.includes(o.pathname),e[0]=o,e[1]=c):c=e[1];const h=c;let p,A;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=a.jsx(Ae,{className:y.logo_full}),A=a.jsx(ye,{className:y.logo_short}),e[2]=p,e[3]=A):(p=e[2],A=e[3]);let m;e[4]!==h||e[5]!==r||e[6]!==t?(m=Ye.map(g=>a.jsx("div",{className:"".concat(y.nav," ").concat(h(g.matchPaths)?y.nav_active:""),onClick:()=>r(g.path),children:t(g.i18nKey)},g.key)),e[4]=h,e[5]=r,e[6]=t,e[7]=m):m=e[7];let f;e[8]!==m?(f=a.jsxs("div",{className:y.left,children:[p,A,a.jsx("div",{className:y.navs,children:m})]}),e[8]=m,e[9]=f):f=e[9];let v;e[10]===Symbol.for("react.memo_cache_sentinel")?(v=a.jsx("div",{className:"flex items-center cursor-pointer pr-[16px]",children:a.jsx(Me,{onClick:()=>l(!0)})}),e[10]=v):v=e[10];let x;e[11]!==f?(x=a.jsxs("div",{className:y.header,children:[f,v]}),e[11]=f,e[12]=x):x=e[12];let L;e[13]===Symbol.for("react.memo_cache_sentinel")?(L=()=>l(!1),e[13]=L):L=e[13];let S;e[14]!==s?(S=a.jsx(Fe,{isOpen:s,onClose:L}),e[14]=s,e[15]=S):S=e[15];let E;return e[16]!==x||e[17]!==S?(E=a.jsxs(a.Fragment,{children:[x,S]}),e[16]=x,e[17]=S,e[18]=E):E=e[18],E}export{ta as H,aa as M};
