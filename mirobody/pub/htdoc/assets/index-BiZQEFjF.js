import{b as F,a as E,g as qe,i as he,s as Qe,d as Ue,e as Ge,h as Be,c as He,u as be,j as m,S as We,M as ze,f as Fe,k as Ze,l as $e,m as J,R as z,A as de}from"./index-BICubz86.js";import{r as C,a as Pe,g as Ke}from"./vendor-antd-DoyqoZ7x.js";import{u as Oe}from"./account-CsOayCF-.js";import{O as Ve,G as Xe,g as Se,s as Ye,a as Je,b as et}from"./vendor-firebase-D-efta1e.js";import{O as tt}from"./index-mABjyEMg.js";const rt="_login_ji1so_1",nt="_form_ji1so_9",ot="_logo_ji1so_16",at="_social_btn_ji1so_30",st="_icon_ji1so_46",it="_google_ji1so_55",lt="_apple_ji1so_64",ut="_wechat_ji1so_71",ct="_divider_ji1so_79",ft="_input_ji1so_100",ht="_code_input_ji1so_118",dt="_error_message_ji1so_162",gt="_button_ji1so_168",vt="_loading_dots_ji1so_191",y={login:rt,form:nt,logo:ot,social_btn:at,icon:st,google:it,apple:lt,wechat:ut,divider:ct,input:ft,code_input:ht,error_message:dt,button:gt,loading_dots:vt},pt=()=>{const f=Oe(r=>r.setUserInfo),e=r=>{Qe(r.access_token),f(r)},a=async r=>{const t=Se();if(!t)throw new Error("Firebase Auth not initialized");if(Ue(Ge))throw await Ye(t,r),new Error("redirect");const o=await Je(t,r);return Be(o,e)};return{handleGoogleLogin:async()=>{try{return await a(new Xe)}catch(r){if(he(r)){E.warn("Google Login: Redirecting");return}throw E.error("ERROR: Google Login",r),r}},handleAppleLogin:async()=>{try{return await a(new Ve("apple.com"))}catch(r){if(he(r)){E.warn("Apple Login: Redirecting");return}throw E.error("ERROR: Apple Login",r),r}},handleEmailLogin:async(r,t)=>{if(!r||!t)throw new Error("Email and code are required");try{const o=await F.emailVerify({email:r,code:t});return e(o),o}catch(o){throw E.error("ERROR: Email Verify",o),o}},handleOauthAuthorize:async(r,t)=>{if(!r)throw new Error("Oauth2 Authorize: Oauth params are required");try{const o=new FormData;for(const[v,d]of r)o.append(v,d||"");o.append("action","allow");const i=await F.oauthAuthorize(o,t),l=qe(i,r);l.type==="fallback"&&E.warn("No callback information in response, redirecting to upload page"),window.location.href=l.url}catch(o){E.error("ERROR: Oauth2 Authorize",o)}},googleOneTapCallback:async({credential:r})=>{try{await F.googleVerify({token:r})}catch(t){E.error("ERROR: Google One Tap Callback",t)}}}},_t="/assets/logo-MLEW-e8g.svg",mt=f=>C.createElement("svg",{width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...f},C.createElement("path",{d:"M17.64 9.20443C17.64 8.56625 17.5827 7.95262 17.4764 7.36353H9V10.8449H13.8436C13.635 11.9699 13.0009 12.9231 12.0477 13.5613V15.8194H14.9564C16.6582 14.2526 17.64 11.9453 17.64 9.20443Z",fill:"#4285F4"}),C.createElement("path",{d:"M8.99976 18C11.4298 18 13.467 17.1941 14.9561 15.8195L12.0475 13.5613C11.2416 14.1013 10.2107 14.4204 8.99976 14.4204C6.65567 14.4204 4.67158 12.8372 3.96385 10.71H0.957031V13.0418C2.43794 15.9831 5.48158 18 8.99976 18Z",fill:"#34A853"}),C.createElement("path",{d:"M3.96409 10.7098C3.78409 10.1698 3.68182 9.59301 3.68182 8.99983C3.68182 8.40665 3.78409 7.82983 3.96409 7.28983V4.95801H0.957273C0.347727 6.17301 0 7.54755 0 8.99983C0 10.4521 0.347727 11.8266 0.957273 13.0416L3.96409 10.7098Z",fill:"#FBBC05"}),C.createElement("path",{d:"M8.99976 3.57955C10.3211 3.57955 11.5075 4.03364 12.4402 4.92545L15.0216 2.34409C13.4629 0.891818 11.4257 0 8.99976 0C5.48158 0 2.43794 2.01682 0.957031 4.95818L3.96385 7.29C4.67158 5.16273 6.65567 3.57955 8.99976 3.57955Z",fill:"#EA4335"})),Ct=f=>C.createElement("svg",{width:18,height:18,viewBox:"0 0 18 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...f},C.createElement("path",{d:"M14.2942 9.61155C14.2808 7.65905 15.8167 6.7128 15.8942 6.66405C14.9658 5.2903 13.5317 5.11655 13.0342 5.10155C11.7517 4.96655 10.5108 5.8653 9.85917 5.8653C9.19417 5.8653 8.17417 5.11405 7.09917 5.13655C5.69917 5.16155 4.39917 5.95655 3.68667 7.20155C2.22417 9.72905 3.31917 13.5053 4.72917 15.5903C5.43417 16.6116 6.26167 17.7478 7.33667 17.7103C8.38667 17.6691 8.77417 17.0416 10.0342 17.0416C11.2817 17.0416 11.6442 17.7103 12.7417 17.6841C13.8692 17.6691 14.5842 16.6628 15.2642 15.6341C16.0692 14.4528 16.3792 13.2978 16.3917 13.2378C16.3642 13.2278 14.3092 12.4653 14.2942 9.61155ZM12.2942 3.8403C12.8792 3.12905 13.2817 2.1453 13.1642 1.1478C12.3067 1.1853 11.2567 1.72655 10.6467 2.42405C10.1067 3.0378 9.62667 4.04405 9.76917 5.00405C10.7317 5.07905 11.7217 4.5378 12.2942 3.8403Z"})),Rt=f=>C.createElement("svg",{width:18,height:18,viewBox:"0 0 18 18",fill:"white",xmlns:"http://www.w3.org/2000/svg",...f},C.createElement("path",{d:"M11.6625 6.47025C11.8388 6.47025 12.0121 6.48313 12.1825 6.50363C11.7168 4.34925 9.3825 2.70825 6.6375 2.70825C3.66825 2.70825 1.26 4.71075 1.26 7.25925C1.26 8.72925 1.97175 10.0305 3.13875 10.9365L2.596 12.5505L4.48575 11.6125C5.16375 11.7443 5.784 11.8125 6.48225 11.8125C6.652 11.8125 6.8185 11.804 6.985 11.7905C6.87825 11.4353 6.82125 11.0603 6.82125 10.6718C6.82125 8.3625 8.9055 6.47025 11.6625 6.47025ZM8.7465 4.98075C9.1515 4.98075 9.42375 5.2635 9.42375 5.64825C9.42375 6.02775 9.1515 6.31575 8.7465 6.31575C8.34675 6.31575 7.93425 6.02775 7.93425 5.64825C7.93425 5.2635 8.34675 4.98075 8.7465 4.98075ZM4.96125 6.31575C4.561 6.31575 4.14375 6.02775 4.14375 5.64825C4.14375 5.2635 4.561 4.98075 4.96125 4.98075C5.366 4.98075 5.639 5.2635 5.639 5.64825C5.639 6.02775 5.366 6.31575 4.96125 6.31575ZM16.56 10.644C16.56 8.50125 14.4045 6.7425 11.6625 6.7425C9.09075 6.7425 7.095 8.50125 7.095 10.644C7.095 12.7963 9.09075 14.5485 11.6625 14.5485C12.1995 14.5485 12.7275 14.4168 13.2555 14.2815L14.739 15.135L14.3333 13.6575C15.7418 12.9083 16.56 11.847 16.56 10.644ZM10.497 9.96375C10.2285 9.96375 9.9585 9.69675 9.9585 9.42975C9.9585 9.16725 10.2285 8.89575 10.497 8.89575C10.905 8.89575 11.175 9.16725 11.175 9.42975C11.175 9.69675 10.905 9.96375 10.497 9.96375ZM13.4865 9.96375C13.223 9.96375 12.948 9.69675 12.948 9.42975C12.948 9.16725 13.223 8.89575 13.4865 8.89575C13.895 8.89575 14.1645 9.16725 14.1645 9.42975C14.1645 9.69675 13.895 9.96375 13.4865 9.96375Z"}));var V={},ee={exports:{}},te,ge;function wt(){if(ge)return te;ge=1;var f="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return te=f,te}var re,ve;function Et(){if(ve)return re;ve=1;var f=wt();function e(){}function a(){}return a.resetWarningCache=e,re=function(){function h(c,n,r,t,o,i){if(i!==f){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}h.isRequired=h;function u(){return h}var s={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:u,element:h,elementType:h,instanceOf:u,node:h,objectOf:u,oneOf:u,oneOfType:u,shape:u,exact:u,checkPropTypes:a,resetWarningCache:e};return s.PropTypes=s,s},re}var pe;function De(){return pe||(pe=1,ee.exports=Et()()),ee.exports}var ne,_e;function Me(){return _e||(_e=1,ne={L:1,M:0,Q:3,H:2}),ne}var oe,me;function Ne(){return me||(me=1,oe={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),oe}var ae,Ce;function yt(){if(Ce)return ae;Ce=1;var f=Ne();function e(a){this.mode=f.MODE_8BIT_BYTE,this.data=a}return e.prototype={getLength:function(a){return this.data.length},write:function(a){for(var h=0;h<this.data.length;h++)a.put(this.data.charCodeAt(h),8)}},ae=e,ae}var se,Re;function Lt(){if(Re)return se;Re=1;var f=Me();function e(a,h){this.totalCount=a,this.dataCount=h}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(a,h){var u=e.getRsBlockTable(a,h);if(u==null)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+h);for(var s=u.length/3,c=new Array,n=0;n<s;n++)for(var r=u[n*3+0],t=u[n*3+1],o=u[n*3+2],i=0;i<r;i++)c.push(new e(t,o));return c},e.getRsBlockTable=function(a,h){switch(h){case f.L:return e.RS_BLOCK_TABLE[(a-1)*4+0];case f.M:return e.RS_BLOCK_TABLE[(a-1)*4+1];case f.Q:return e.RS_BLOCK_TABLE[(a-1)*4+2];case f.H:return e.RS_BLOCK_TABLE[(a-1)*4+3];default:return}},se=e,se}var ie,we;function Tt(){if(we)return ie;we=1;function f(){this.buffer=new Array,this.length=0}return f.prototype={get:function(e){var a=Math.floor(e/8);return(this.buffer[a]>>>7-e%8&1)==1},put:function(e,a){for(var h=0;h<a;h++)this.putBit((e>>>a-h-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),e&&(this.buffer[a]|=128>>>this.length%8),this.length++}},ie=f,ie}var le,Ee;function Ie(){if(Ee)return le;Ee=1;for(var f={glog:function(a){if(a<1)throw new Error("glog("+a+")");return f.LOG_TABLE[a]},gexp:function(a){for(;a<0;)a+=255;for(;a>=256;)a-=255;return f.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)f.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)f.EXP_TABLE[e]=f.EXP_TABLE[e-4]^f.EXP_TABLE[e-5]^f.EXP_TABLE[e-6]^f.EXP_TABLE[e-8];for(var e=0;e<255;e++)f.LOG_TABLE[f.EXP_TABLE[e]]=e;return le=f,le}var ue,ye;function ke(){if(ye)return ue;ye=1;var f=Ie();function e(a,h){if(a.length==null)throw new Error(a.length+"/"+h);for(var u=0;u<a.length&&a[u]==0;)u++;this.num=new Array(a.length-u+h);for(var s=0;s<a.length-u;s++)this.num[s]=a[s+u]}return e.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var h=new Array(this.getLength()+a.getLength()-1),u=0;u<this.getLength();u++)for(var s=0;s<a.getLength();s++)h[u+s]^=f.gexp(f.glog(this.get(u))+f.glog(a.get(s)));return new e(h,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var h=f.glog(this.get(0))-f.glog(a.get(0)),u=new Array(this.getLength()),s=0;s<this.getLength();s++)u[s]=this.get(s);for(var s=0;s<a.getLength();s++)u[s]^=f.gexp(f.glog(a.get(s))+h);return new e(u,0).mod(a)}},ue=e,ue}var ce,Le;function xt(){if(Le)return ce;Le=1;var f=Ne(),e=ke(),a=Ie(),h={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},u={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(s){for(var c=s<<10;u.getBCHDigit(c)-u.getBCHDigit(u.G15)>=0;)c^=u.G15<<u.getBCHDigit(c)-u.getBCHDigit(u.G15);return(s<<10|c)^u.G15_MASK},getBCHTypeNumber:function(s){for(var c=s<<12;u.getBCHDigit(c)-u.getBCHDigit(u.G18)>=0;)c^=u.G18<<u.getBCHDigit(c)-u.getBCHDigit(u.G18);return s<<12|c},getBCHDigit:function(s){for(var c=0;s!=0;)c++,s>>>=1;return c},getPatternPosition:function(s){return u.PATTERN_POSITION_TABLE[s-1]},getMask:function(s,c,n){switch(s){case h.PATTERN000:return(c+n)%2==0;case h.PATTERN001:return c%2==0;case h.PATTERN010:return n%3==0;case h.PATTERN011:return(c+n)%3==0;case h.PATTERN100:return(Math.floor(c/2)+Math.floor(n/3))%2==0;case h.PATTERN101:return c*n%2+c*n%3==0;case h.PATTERN110:return(c*n%2+c*n%3)%2==0;case h.PATTERN111:return(c*n%3+(c+n)%2)%2==0;default:throw new Error("bad maskPattern:"+s)}},getErrorCorrectPolynomial:function(s){for(var c=new e([1],0),n=0;n<s;n++)c=c.multiply(new e([1,a.gexp(n)],0));return c},getLengthInBits:function(s,c){if(1<=c&&c<10)switch(s){case f.MODE_NUMBER:return 10;case f.MODE_ALPHA_NUM:return 9;case f.MODE_8BIT_BYTE:return 8;case f.MODE_KANJI:return 8;default:throw new Error("mode:"+s)}else if(c<27)switch(s){case f.MODE_NUMBER:return 12;case f.MODE_ALPHA_NUM:return 11;case f.MODE_8BIT_BYTE:return 16;case f.MODE_KANJI:return 10;default:throw new Error("mode:"+s)}else if(c<41)switch(s){case f.MODE_NUMBER:return 14;case f.MODE_ALPHA_NUM:return 13;case f.MODE_8BIT_BYTE:return 16;case f.MODE_KANJI:return 12;default:throw new Error("mode:"+s)}else throw new Error("type:"+c)},getLostPoint:function(s){for(var c=s.getModuleCount(),n=0,r=0;r<c;r++)for(var t=0;t<c;t++){for(var o=0,i=s.isDark(r,t),l=-1;l<=1;l++)if(!(r+l<0||c<=r+l))for(var v=-1;v<=1;v++)t+v<0||c<=t+v||l==0&&v==0||i==s.isDark(r+l,t+v)&&o++;o>5&&(n+=3+o-5)}for(var r=0;r<c-1;r++)for(var t=0;t<c-1;t++){var d=0;s.isDark(r,t)&&d++,s.isDark(r+1,t)&&d++,s.isDark(r,t+1)&&d++,s.isDark(r+1,t+1)&&d++,(d==0||d==4)&&(n+=3)}for(var r=0;r<c;r++)for(var t=0;t<c-6;t++)s.isDark(r,t)&&!s.isDark(r,t+1)&&s.isDark(r,t+2)&&s.isDark(r,t+3)&&s.isDark(r,t+4)&&!s.isDark(r,t+5)&&s.isDark(r,t+6)&&(n+=40);for(var t=0;t<c;t++)for(var r=0;r<c-6;r++)s.isDark(r,t)&&!s.isDark(r+1,t)&&s.isDark(r+2,t)&&s.isDark(r+3,t)&&s.isDark(r+4,t)&&!s.isDark(r+5,t)&&s.isDark(r+6,t)&&(n+=40);for(var _=0,t=0;t<c;t++)for(var r=0;r<c;r++)s.isDark(r,t)&&_++;var R=Math.abs(100*_/c/c-50)/5;return n+=R*10,n}};return ce=u,ce}var fe,Te;function At(){if(Te)return fe;Te=1;var f=yt(),e=Lt(),a=Tt(),h=xt(),u=ke();function s(n,r){this.typeNumber=n,this.errorCorrectLevel=r,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var c=s.prototype;return c.addData=function(n){var r=new f(n);this.dataList.push(r),this.dataCache=null},c.isDark=function(n,r){if(n<0||this.moduleCount<=n||r<0||this.moduleCount<=r)throw new Error(n+","+r);return this.modules[n][r]},c.getModuleCount=function(){return this.moduleCount},c.make=function(){if(this.typeNumber<1){var n=1;for(n=1;n<40;n++){for(var r=e.getRSBlocks(n,this.errorCorrectLevel),t=new a,o=0,i=0;i<r.length;i++)o+=r[i].dataCount;for(var i=0;i<this.dataList.length;i++){var l=this.dataList[i];t.put(l.mode,4),t.put(l.getLength(),h.getLengthInBits(l.mode,n)),l.write(t)}if(t.getLengthInBits()<=o*8)break}this.typeNumber=n}this.makeImpl(!1,this.getBestMaskPattern())},c.makeImpl=function(n,r){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var t=0;t<this.moduleCount;t++){this.modules[t]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[t][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(n,r),this.typeNumber>=7&&this.setupTypeNumber(n),this.dataCache==null&&(this.dataCache=s.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},c.setupPositionProbePattern=function(n,r){for(var t=-1;t<=7;t++)if(!(n+t<=-1||this.moduleCount<=n+t))for(var o=-1;o<=7;o++)r+o<=-1||this.moduleCount<=r+o||(0<=t&&t<=6&&(o==0||o==6)||0<=o&&o<=6&&(t==0||t==6)||2<=t&&t<=4&&2<=o&&o<=4?this.modules[n+t][r+o]=!0:this.modules[n+t][r+o]=!1)},c.getBestMaskPattern=function(){for(var n=0,r=0,t=0;t<8;t++){this.makeImpl(!0,t);var o=h.getLostPoint(this);(t==0||n>o)&&(n=o,r=t)}return r},c.createMovieClip=function(n,r,t){var o=n.createEmptyMovieClip(r,t),i=1;this.make();for(var l=0;l<this.modules.length;l++)for(var v=l*i,d=0;d<this.modules[l].length;d++){var _=d*i,R=this.modules[l][d];R&&(o.beginFill(0,100),o.moveTo(_,v),o.lineTo(_+i,v),o.lineTo(_+i,v+i),o.lineTo(_,v+i),o.endFill())}return o},c.setupTimingPattern=function(){for(var n=8;n<this.moduleCount-8;n++)this.modules[n][6]==null&&(this.modules[n][6]=n%2==0);for(var r=8;r<this.moduleCount-8;r++)this.modules[6][r]==null&&(this.modules[6][r]=r%2==0)},c.setupPositionAdjustPattern=function(){for(var n=h.getPatternPosition(this.typeNumber),r=0;r<n.length;r++)for(var t=0;t<n.length;t++){var o=n[r],i=n[t];if(this.modules[o][i]==null)for(var l=-2;l<=2;l++)for(var v=-2;v<=2;v++)l==-2||l==2||v==-2||v==2||l==0&&v==0?this.modules[o+l][i+v]=!0:this.modules[o+l][i+v]=!1}},c.setupTypeNumber=function(n){for(var r=h.getBCHTypeNumber(this.typeNumber),t=0;t<18;t++){var o=!n&&(r>>t&1)==1;this.modules[Math.floor(t/3)][t%3+this.moduleCount-8-3]=o}for(var t=0;t<18;t++){var o=!n&&(r>>t&1)==1;this.modules[t%3+this.moduleCount-8-3][Math.floor(t/3)]=o}},c.setupTypeInfo=function(n,r){for(var t=this.errorCorrectLevel<<3|r,o=h.getBCHTypeInfo(t),i=0;i<15;i++){var l=!n&&(o>>i&1)==1;i<6?this.modules[i][8]=l:i<8?this.modules[i+1][8]=l:this.modules[this.moduleCount-15+i][8]=l}for(var i=0;i<15;i++){var l=!n&&(o>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=l:i<9?this.modules[8][15-i-1+1]=l:this.modules[8][15-i-1]=l}this.modules[this.moduleCount-8][8]=!n},c.mapData=function(n,r){for(var t=-1,o=this.moduleCount-1,i=7,l=0,v=this.moduleCount-1;v>0;v-=2)for(v==6&&v--;;){for(var d=0;d<2;d++)if(this.modules[o][v-d]==null){var _=!1;l<n.length&&(_=(n[l]>>>i&1)==1);var R=h.getMask(r,o,v-d);R&&(_=!_),this.modules[o][v-d]=_,i--,i==-1&&(l++,i=7)}if(o+=t,o<0||this.moduleCount<=o){o-=t,t=-t;break}}},s.PAD0=236,s.PAD1=17,s.createData=function(n,r,t){for(var o=e.getRSBlocks(n,r),i=new a,l=0;l<t.length;l++){var v=t[l];i.put(v.mode,4),i.put(v.getLength(),h.getLengthInBits(v.mode,n)),v.write(i)}for(var d=0,l=0;l<o.length;l++)d+=o[l].dataCount;if(i.getLengthInBits()>d*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+d*8+")");for(i.getLengthInBits()+4<=d*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=d*8||(i.put(s.PAD0,8),i.getLengthInBits()>=d*8));)i.put(s.PAD1,8);return s.createBytes(i,o)},s.createBytes=function(n,r){for(var t=0,o=0,i=0,l=new Array(r.length),v=new Array(r.length),d=0;d<r.length;d++){var _=r[d].dataCount,R=r[d].totalCount-_;o=Math.max(o,_),i=Math.max(i,R),l[d]=new Array(_);for(var g=0;g<l[d].length;g++)l[d][g]=255&n.buffer[g+t];t+=_;var w=h.getErrorCorrectPolynomial(R),S=new u(l[d],w.getLength()-1),b=S.mod(w);v[d]=new Array(w.getLength()-1);for(var g=0;g<v[d].length;g++){var x=g+b.getLength()-v[d].length;v[d][g]=x>=0?b.get(x):0}}for(var P=0,g=0;g<r.length;g++)P+=r[g].totalCount;for(var T=new Array(P),A=0,g=0;g<o;g++)for(var d=0;d<r.length;d++)g<l[d].length&&(T[A++]=l[d][g]);for(var g=0;g<i;g++)for(var d=0;d<r.length;d++)g<v[d].length&&(T[A++]=v[d][g]);return T},fe=s,fe}var Y={},xe;function Bt(){if(xe)return Y;xe=1,Object.defineProperty(Y,"__esModule",{value:!0});var f=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(t[l]=i[l])}return t},e=De(),a=s(e),h=Pe(),u=s(h);function s(t){return t&&t.__esModule?t:{default:t}}function c(t,o){var i={};for(var l in t)o.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(t,l)&&(i[l]=t[l]);return i}var n={bgColor:a.default.oneOfType([a.default.object,a.default.string]).isRequired,bgD:a.default.string.isRequired,fgColor:a.default.oneOfType([a.default.object,a.default.string]).isRequired,fgD:a.default.string.isRequired,size:a.default.number.isRequired,title:a.default.string,viewBoxSize:a.default.number.isRequired,xmlns:a.default.string},r=(0,h.forwardRef)(function(t,o){var i=t.bgColor,l=t.bgD,v=t.fgD,d=t.fgColor,_=t.size,R=t.title,g=t.viewBoxSize,w=t.xmlns,S=w===void 0?"http://www.w3.org/2000/svg":w,b=c(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return u.default.createElement("svg",f({},b,{height:_,ref:o,viewBox:"0 0 "+g+" "+g,width:_,xmlns:S}),R?u.default.createElement("title",null,R):null,u.default.createElement("path",{d:l,fill:i}),u.default.createElement("path",{d:v,fill:d}))});return r.displayName="QRCodeSvg",r.propTypes=n,Y.default=r,Y}var Ae;function bt(){if(Ae)return V;Ae=1,Object.defineProperty(V,"__esModule",{value:!0}),V.QRCode=void 0;var f=Object.assign||function(_){for(var R=1;R<arguments.length;R++){var g=arguments[R];for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(_[w]=g[w])}return _},e=De(),a=i(e),h=Me(),u=i(h),s=At(),c=i(s),n=Pe(),r=i(n),t=Bt(),o=i(t);function i(_){return _&&_.__esModule?_:{default:_}}function l(_,R){var g={};for(var w in _)R.indexOf(w)>=0||Object.prototype.hasOwnProperty.call(_,w)&&(g[w]=_[w]);return g}var v={bgColor:a.default.oneOfType([a.default.object,a.default.string]),fgColor:a.default.oneOfType([a.default.object,a.default.string]),level:a.default.string,size:a.default.number,value:a.default.string.isRequired},d=(0,n.forwardRef)(function(_,R){var g=_.bgColor,w=g===void 0?"#FFFFFF":g,S=_.fgColor,b=S===void 0?"#000000":S,x=_.level,P=x===void 0?"L":x,T=_.size,A=T===void 0?256:T,k=_.value,j=l(_,["bgColor","fgColor","level","size","value"]),D=new c.default(-1,u.default[P]);D.addData(k),D.make();var B=D.modules;return r.default.createElement(o.default,f({},j,{bgColor:w,bgD:B.map(function(M,O){return M.map(function(N,I){return N?"":"M "+I+" "+O+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:b,fgD:B.map(function(M,O){return M.map(function(N,I){return N?"M "+I+" "+O+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:R,size:A,viewBoxSize:B.length}))});return V.QRCode=d,d.displayName="QRCode",d.propTypes=v,V.default=d,V}var Pt=bt();const Ot=Ke(Pt),St=f=>C.createElement("svg",{width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",...f},C.createElement("circle",{cx:24,cy:24,r:24,fill:"#07C160"}),C.createElement("path",{d:"M24 14C18.48 14 14 18.48 14 24C14 29.52 18.48 34 24 34C27.84 34 31.12 31.84 32.62 28.72L30.22 27.52C29.22 29.68 26.84 31.2 24 31.2C20.24 31.2 17.2 28.16 17.2 24.4C17.2 20.64 20.24 17.6 24 17.6C26.08 17.6 27.92 18.52 29.2 19.96L26 23.2H34V15.2L31.28 17.92C29.48 16.08 26.88 14 24 14Z",fill:"white"})),Dt="_modal_16frv_1",Mt="_title_16frv_11",Nt="_content_16frv_19",It="_qr_container_16frv_25",kt="_qr_wrapper_16frv_37",jt="_expired_overlay_16frv_41",qt="_refresh_icon_16frv_57",Qt="_expired_text_16frv_63",Ut="_refresh_hint_16frv_70",Gt="_desc_16frv_77",Ht="_countdown_16frv_84",Q={modal:Dt,title:Mt,content:Nt,qr_container:It,qr_wrapper:kt,expired_overlay:jt,refresh_icon:qt,expired_text:Qt,refresh_hint:Ut,desc:Gt,countdown:Ht};function Wt(f){const e=He.c(55),{isOpen:a,onClose:h,qrCodeUrl:u,onLoginSuccess:s,onRefresh:c}=f,{t:n}=be(),[r,t]=C.useState(60),[o,i]=C.useState(!1);let l,v;e[0]!==a||e[1]!==u?(l=()=>{a&&u&&(t(60),i(!1))},v=[a,u],e[0]=a,e[1]=u,e[2]=l,e[3]=v):(l=e[2],v=e[3]),C.useEffect(l,v);let d,_;e[4]!==o||e[5]!==a?(d=()=>{if(!a||o)return;const H=setInterval(()=>{t(W=>W<=1?(i(!0),0):W-1)},1e3);return()=>clearInterval(H)},_=[a,o],e[4]=o,e[5]=a,e[6]=d,e[7]=_):(d=e[6],_=e[7]),C.useEffect(d,_);let R,g;e[8]!==o||e[9]!==a||e[10]!==s||e[11]!==u?(R=()=>{if(!a||!u||o)return;let H;try{const U=new URL(u),q=U.searchParams.get("check");q?H=new URL(q).searchParams.get("state"):H=U.searchParams.get("state")}catch(U){const q=U;E.error("ERROR: Failed to extract state from qrCodeUrl",q);return}if(!H){E.error("ERROR: No state parameter found in qrCodeUrl");return}let W=!1;const X=async()=>{if(!W){try{const U=await F.wechatQrCheck(H),{accessToken:q}=U;if(q){s(q);return}}catch(U){const q=U;E.error("ERROR: WeChat QR Check",q)}W||(await Fe(3e3),X())}};return X(),()=>{W=!0}},g=[a,u,o,s],e[8]=o,e[9]=a,e[10]=s,e[11]=u,e[12]=R,e[13]=g):(R=e[12],g=e[13]),C.useEffect(R,g);let w;e[14]!==c?(w=()=>{t(60),i(!1),c()},e[14]=c,e[15]=w):w=e[15];const S=w;let b;e[16]!==h?(b=()=>{t(60),i(!1),h()},e[16]=h,e[17]=b):b=e[17];const x=b;if(!a)return null;let P;e[18]!==n?(P=n("wechat_qr_title"),e[18]=n,e[19]=P):P=e[19];let T;e[20]!==P?(T=m.jsx("h2",{className:Q.title,children:P}),e[20]=P,e[21]=T):T=e[21];let A;e[22]!==x?(A=m.jsx(We,{onClick:x,className:"cursor-pointer absolute top-[20px] right-[20px]"}),e[22]=x,e[23]=A):A=e[23];let k;e[24]!==u?(k=u&&m.jsx(Ot,{value:u,size:200}),e[24]=u,e[25]=k):k=e[25];let j;e[26]!==k?(j=m.jsx("div",{className:Q.qr_wrapper,children:k}),e[26]=k,e[27]=j):j=e[27];let D;e[28]!==S||e[29]!==o||e[30]!==n?(D=o&&m.jsxs("div",{className:Q.expired_overlay,onClick:S,children:[m.jsx(St,{className:Q.refresh_icon}),m.jsx("p",{className:Q.expired_text,children:n("wechat_qr_expired")}),m.jsx("p",{className:Q.refresh_hint,children:n("wechat_qr_refresh")})]}),e[28]=S,e[29]=o,e[30]=n,e[31]=D):D=e[31];let B;e[32]!==j||e[33]!==D?(B=m.jsxs("div",{className:Q.qr_container,children:[j,D]}),e[32]=j,e[33]=D,e[34]=B):B=e[34];let M;e[35]!==n?(M=n("wechat_qr_desc"),e[35]=n,e[36]=M):M=e[36];let O;e[37]!==M?(O=m.jsx("p",{className:Q.desc,children:M}),e[37]=M,e[38]=O):O=e[38];let N;e[39]!==r||e[40]!==o||e[41]!==n?(N=!o&&m.jsx("p",{className:Q.countdown,children:n("wechat_qr_countdown",{seconds:r})}),e[39]=r,e[40]=o,e[41]=n,e[42]=N):N=e[42];let I;e[43]!==B||e[44]!==O||e[45]!==N?(I=m.jsxs("div",{className:Q.content,children:[B,O,N]}),e[43]=B,e[44]=O,e[45]=N,e[46]=I):I=e[46];let G;e[47]!==T||e[48]!==A||e[49]!==I?(G=m.jsxs("div",{className:Q.modal,onClick:zt,children:[T,A,I]}),e[47]=T,e[48]=A,e[49]=I,e[50]=G):G=e[50];let Z;return e[51]!==x||e[52]!==a||e[53]!==G?(Z=m.jsx(ze,{isOpen:a,onClose:x,maskClosable:!1,children:G}),e[51]=x,e[52]=a,e[53]=G,e[54]=Z):Z=e[54],Z}function zt(f){return f.stopPropagation()}function Xt(){const[f,e]=C.useState(""),[a,h]=C.useState(""),[u,s]=C.useState(0),[c,n]=C.useState(""),[r,t]=C.useState(!1),[o,i]=C.useState(!1),[l,v]=C.useState(!1),[d,_]=C.useState(!1),R=Ze(),{t:g}=be(),{handleGoogleLogin:w,handleAppleLogin:S,handleEmailLogin:b,handleOauthAuthorize:x}=pt(),[P]=$e(),T=Oe(p=>p.setUserInfo),A=J(p=>p.isShowWeChatLogin),k=J(p=>p.isShowGoogleLogin),j=J(p=>p.isShowAppleLogin),[D,B]=C.useState(!1),[M,O]=C.useState(null);C.useEffect(()=>{if(u>0){const p=setTimeout(()=>{s(u-1)},1e3);return()=>clearTimeout(p)}},[u]);const N=C.useEffectEvent(async p=>{p&&await Be(p,async L=>{try{localStorage.setItem(de,L.access_token),T(L),await $(L)}catch(K){throw E.error("ERROR: Handle Firebase Result Effect",K),K}})});C.useEffect(()=>{try{const p=sessionStorage.getItem(z);p==="google"?t(!0):p==="apple"&&i(!0);const L=Se();L?et(L).then(N).catch(K=>{E.error("ERROR: getRedirectResult",K)}).finally(()=>{sessionStorage.removeItem(z),t(!1),i(!1)}):E.warn("ERROR: Firebase Auth not initialized")}catch(p){}},[]);const I=async()=>{if(!f){n(g("error_enter_email"));return}try{n(""),s(60),await F.emailLogin({email:f})}catch(p){E.error("ERROR: Send Code",p),n(g("error_send_code_failed"))}},G=async p=>{p.preventDefault(),await Z()},Z=async()=>{try{_(!0);const p=await b(f,a);await $(p)}catch(p){E.error("ERROR: Email Verify",p),n(g("error_email_verify_failed"))}finally{_(!1)}},H=async()=>{try{t(!0),sessionStorage.setItem(z,"google");const p=await w();sessionStorage.removeItem(z),await $(p),t(!1)}catch(p){E.error("ERROR: Google Login",p),sessionStorage.removeItem(z),t(!1)}},W=async()=>{try{i(!0),sessionStorage.setItem(z,"apple");const p=await S();sessionStorage.removeItem(z),await $(p),i(!1)}catch(p){E.error("ERROR: Apple Login",p),sessionStorage.removeItem(z),i(!1)}},X=async()=>{try{v(!0);const{qrCode:p}=await F.wechatLogin();O(p),B(!0)}catch(p){E.error("ERROR: WeChat Login",p)}finally{v(!1)}},U=async p=>{try{localStorage.setItem(de,p);const L={access_token:p};T(L),B(!1),await $(L)}catch(L){E.error("ERROR: WeChat Login Success",L)}},q=async()=>{try{const{qrCode:p}=await F.wechatLogin();O(p)}catch(p){E.error("ERROR: Refresh WeChat QR Code",p)}},$=async({access_token:p})=>{try{const L=P.get(tt);if(L){const K=decodeURIComponent(L),je=new URLSearchParams(K);await x(je,p)}else R("/")}catch(L){throw E.error("ERROR: Oauth2 Authorize",L),L}};return m.jsxs("div",{className:y.login,children:[m.jsxs("div",{className:y.form,children:[m.jsx("img",{src:_t,alt:"Logo",className:y.logo}),k&&m.jsxs("button",{className:"".concat(y.social_btn," ").concat(y.google),onClick:H,disabled:r,children:[m.jsx(mt,{className:y.icon}),m.jsx("span",{className:r?y.loading_dots:"",children:g(r?"google_signing_in":"sign_in_with_google")})]}),j&&m.jsxs("button",{className:"".concat(y.social_btn," ").concat(y.apple),onClick:W,disabled:o,children:[m.jsx(Ct,{className:y.icon}),m.jsx("span",{className:o?y.loading_dots:"",children:g(o?"apple_signing_in":"sign_in_with_apple")})]}),A&&m.jsxs("button",{className:"".concat(y.social_btn," ").concat(y.wechat),onClick:X,disabled:l,children:[m.jsx(Rt,{className:y.icon}),m.jsx("span",{className:l?y.loading_dots:"",children:g(l?"wechat_signing_in":"sign_in_with_wechat")})]}),(k||j||A)&&m.jsxs("div",{className:y.divider,children:[m.jsx("hr",{}),m.jsx("span",{children:g("or").toUpperCase()})]}),m.jsxs("form",{onSubmit:G,children:[m.jsx("div",{className:y.input,children:m.jsx("input",{type:"text",placeholder:g("email_placeholder"),value:f,onChange:p=>e(p.target.value),autoComplete:"email"})}),m.jsxs("div",{className:y.code_input,children:[m.jsx("input",{type:"text",placeholder:g("code_placeholder"),value:a,onChange:p=>h(p.target.value),autoComplete:"one-time-code"}),m.jsx("button",{type:"button",onClick:I,disabled:u>0||!f,children:u>0?g("resend_in",{seconds:u}):g("send_code")})]}),c&&m.jsx("div",{className:y.error_message,children:c}),m.jsx("div",{className:y.button,children:m.jsx("button",{type:"submit",disabled:d,children:m.jsx("span",{className:d?y.loading_dots:"",children:g(d?"signing_in":"sign_in")})})})]})]}),m.jsx(Wt,{isOpen:D,onClose:()=>B(!1),qrCodeUrl:M,onLoginSuccess:U,onRefresh:q})]})}export{Xt as default};
